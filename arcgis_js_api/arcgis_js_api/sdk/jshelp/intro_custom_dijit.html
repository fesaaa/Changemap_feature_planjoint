<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="ie lt-ie9 lt-ie8 lt-ie7 ie6"> <![endif]-->
<!--[if IE 7]>         <html class="ie lt-ie9 lt-ie8 ie7"> <![endif]-->
<!--[if IE 8]>         <html class="ie lt-ie9 ie8"> <![endif]-->
<!--[if gt IE 8]><!--> <html> <!--<![endif]-->
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

  <meta name="content-language" content="en">
  <meta name="product" content="js-api-arcgis">
  <meta name="subject" content="DEVELOPER,WEB,WEB APPLICATIONS,MOBILE">
  <meta name="sub_category" content="JavaScript API">
  <meta name="search-collection" content="help">
  <meta name="search-category" content="help-api">
  <meta name="version" content="arcgis-3.8"> <!-- API version -->
  <meta name="content_type" content="Help Topic"> <!-- options: Help Topic, API Reference, Sample OR Tutorial -->
  <meta name="last-modified" content="2013-12-19"> <!-- sub 1:  put in date docs were generated -->

  <link rel="stylesheet" href="../styles/screen.css">
  <link rel="stylesheet" href="../styles/jsdoc.css">
  <link rel="stylesheet" href="../styles/homepage.css">
  <link rel="stylesheet" href="../styles/grid.css">
  <link rel="stylesheet" href="../styles/tree.css">
  <link rel="stylesheet" href="../prettify/prettify.css">
  <style>
    html {
      overflow-y: auto;
    }
    .navigation-bar, .section-bar {
      margin-bottom: 0;
    }
    .navigation-bar header h1, .section-bar header h1 {
      margin-top: .35294em;
    }
    .navigation-bar, .section-bar {
      background: url('../graphics/banner.jpg') no-repeat center center #762783;
      min-height: 48px;
      color: white;
    }
    #esri-logo {
      background: url('../graphics/logo-esri.png') no-repeat center center ;
      width: 100px;
    }
    @font-face {
    font-family:'icomoon';src:url('../fonts/icons.eot');src:url('../fonts/icons.eot?#iefix') format("embedded-opentype"),url('../fonts/icons.woff') format("woff"),url('../fonts/icons.ttf') format("truetype"),url('../fonts/icons.svg#icomoon') format("svg");font-weight:400;font-style:normal
    }[data-icon]:before {
      font-family: 'icomoon';
      content: attr(data-icon);
      speak: none;
      font-weight: 400;
      line-height: 1;
      -webkit-font-smoothing: antialiased
    }[class*="icon-"]:before {
      font-family: 'icomoon';
      speak: none;
      font-style: normal;
      font-weight: 400;
      line-height: 1;
      -webkit-font-smoothing: antialiased;
      text-transform: none
    }
    pre {
      font-size: 1.1em;
      line-height: normal;
      margin: 0;
    }
    #header nav li a {
      font-size: .875em;
    }
    #esri-logo {
      margin-left: 0;
    }
  </style>
  <!--[if lt IE 9]>
    <script src="../scripts/libs/html5shiv.js"></script>
    <script src="../scripts/libs/selectivizr-min.js"></script>
    <style>
      #wrapper {
        min-width: 960px;
      }
    </style>
  <![endif]-->
  <title>
    Guide | ArcGIS API for JavaScript 
  </title>
</head>
  
<body>
<div id="nav">
<header id="header">
  <div class="container relative-container">
    <div class="header-inner ">
      <div class="logo-wrap"><a href="../" id="site-logo">Arc<span>GIS</span> API for JavaScript</a><!--span class="down-arrow" id="down-arrow"></span--></div>
      <nav id="site-nav" class="">
        <a href="/en/" class="selected">
          <h4 class="developers">Arc<span>GIS</span> API for JavaScript</h4>
          <p>Build location-aware applications with ArcGIS</p>
        </a>

        <a href="https://www.arcgis.com/about/">
          <h4 class="organizations">Arc<span>GIS</span> for Organizations</h4>
          <p>Learn more about ArcGIS</p>
        </a>
      </nav>

      <a id="esri-logo" href="http://esri.com">Esri</a>
      <div id="logged-out-navigation" class="dropdown-navigation hide">
  <a id="login-link" class="btn small light" href="/en/log-in/">Log In</a>
</div>
<div id="logged-in-navigation" class="dropdown-navigation dropdown-wrapper hide">
  <a href="/en/usage-summary" class="dropdown btn small light">
    <!-- <img src="http://d3w50ib5d2uy0g.cloudfront.net/cdn/2464//js/esri/arcgisonline/css/images/no-user-thumb.jpg" width="16" height="16" alt=""> --><span id="username"></span>
  </a>
  <div class="dropdown-content">
    <ul>
      <li><a href="/en/usage-summary/">Usage Summary</a></li>
      <li><a href="/en/applications/">Applications</a></li>
      <li></li>
      <li><a href="/en/tools/">GIS Tools</a></li>
    </ul>
    <hr>
    <ul>
      <li><a href="/en/account/profile/">Account Settings</a></li>
      <li><a href="/en/feedback/">Feedback</a></li>
    </ul>
    <hr>
    <ul>
      <li><a id="log-out-link" href="#">Log Out</a></li>
    </ul>
  </div>
</div>

      <div id="mobile-navigation" class="dropdown-navigation dropdown-wrapper">
        <a href="#" class="dropdown btn small light icon icon-list-2">Select <span>a Section</span></a>
        <div class="dropdown-content">
          <ul>
            <li><a href="../jstutorials/">Tutorials</a></li>
            <li><a href="../jsapi/">API Reference</a></li>
            <li><a href="../jssamples/">Samples</a></li>
            <li><a href="http://forums.arcgis.com/forums/15">Forum</a></li>
            <li><a href="../../">All Developer Resources</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>

<div class="navigation-bar">
  <div class="container">
    <nav>
      <div id="section-label"><a href=".">Concepts</a></div>
      <ul>
        <!--li class="current"><a href="/en/javascript/">Home</a></li-->
        <li><a href="../jstutorials/">Tutorials</a></li>
        <li class="current"><a href=".">Concepts</a></li>
        <li><a href="../jsapi/">API Reference</a></li>
        <li><a href="../jssamples/">Samples</a></li>
        <li><a href="http://forums.arcgis.com/forums/15">Forum</a></li>
        <li><a href="../../">All Developer Resources</a></li>
      </ul>
    </nav>
  </div>
</div> 
</div><!-- end nav bar --> <!-- sub 2: header and navigation -->

<div class="container_12">
  <div class="grid_3 contentWrapper">
    <div id="toggleToc">
      <img src="../graphics/tochide.gif"> Hide Table of Contents
    </div>
    <div id="apiToc"><div class="treeDiv" id="tree" style="top: 35px; left: 0px;">
  <div id="treeRoot" ondragstart="return false" onselectstart="return false">
    <div class="treeNode">
      <a class="treeUnselected" href="." onclick="clickAnchor(this)">ArcGIS JavaScript API Overview</a>
    </div>
    <div class="treeNode">
      <a class="treeUnselected" href="whats_new.html" onclick="clickAnchor(this)">What's New in Version 3.8</a>
    </div>
    <!-- About the API-->
    <div class="treeNode">
      <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif"/>
      <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">About the API</span>
      <div class="treeSubnodesHidden">
        <div class="treeNode">
          <a class="treeUnselected" href="intro_accessapi.html" onclick="clickAnchor(this)">Get the API</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_compactbuild.html" onclick="clickAnchor(this)">Compact build</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="localization.html" onclick="clickAnchor(this)">Localization</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="css.html" onclick="clickAnchor(this)">Required CSS</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="supported_browsers.html" onclick="clickAnchor(this)">Supported Browsers</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="community.html" onclick="clickAnchor(this)">Community</a>
        </div>
        <!--Working with Dojo-->
        <div class="treeNode">
          <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif">
          <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
            Dojo
          </span>
          <div class="treeSubnodesHidden">
            <div class="treeNode">
              <a class="treeUnselected" href="inside_dojo.html" onclick="clickAnchor(this)">Working with Dojo</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="inside_dojoversion.html" onclick="clickAnchor(this)">Get Dojo</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="inside_dojodijits.html" onclick="clickAnchor(this)">Dojo dijits</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="inside_dojo_amd.html" onclick="clickAnchor(this)">Dojo and AMD</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="inside_dojohelp.html" onclick="clickAnchor(this)">Additional resources</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="why_dojo.html" onclick="clickAnchor(this)">Why Dojo?</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--End About the API-->
    <!--Getting Started-->
    <div class="treeNode">
      <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif">
      <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
        Getting Started
      </span>
      <div class="treeSubnodesHidden">
        <div class="treeNode">
          <a class="treeUnselected" href="intro_gettingstarted.html" onclick="clickAnchor(this)">Overview</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_devenv.html" onclick="clickAnchor(this)">Setting up a development environment</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="../jstutorials/intro_firstmap.html" onclick="clickAnchor(this)">Build your first application</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="../jstutorials/intro_agstemplate.html" onclick="clickAnchor(this)">Build a web map based application
          </a>
        </div>
      </div>
    </div>
    <!--Inside the API-->
    <div class="treeNode">
      <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif">
      <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
        Working with the API
      </span>
      <div class="treeSubnodesHidden">
        <div class="treeNode">
          <a class="treeUnselected" href="inside_defaults.html" onclick="clickAnchor(this)">Default API configurations</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_bundle.html" onclick="clickAnchor(this)">Default API strings</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_esri_request.html" onclick="clickAnchor(this)">Retrieve data from a web server</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_navigation.html" onclick="clickAnchor(this)">Map navigation</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_events.html" onclick="clickAnchor(this)">Events</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_extents.html" onclick="clickAnchor(this)">Setting Extents</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_editing.html" onclick="clickAnchor(this)">Editing</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_temporal.html" onclick="clickAnchor(this)">Time aware data</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_firsttask.html" onclick="clickAnchor(this)">Adding a task</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_querytask.html" onclick="clickAnchor(this)">Using QueryTask</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_custom_layers.html" onclick="clickAnchor(this)">Creating custom layer types</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="../jstutorials/intro_javascript_classes.html" onclick="clickAnchor(this)">Writing a class</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="../jstutorials/intro_custom_dijit.html" onclick="clickAnchor(this)">Writing a custom widget</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_webmap.html" onclick="clickAnchor(this)">Web maps</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_analysiswidgets.html" onclick="clickAnchor(this)">Working with Analysis Widgets</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_geoenrichment.html" onclick="clickAnchor(this)">Working with GeoEnrichment Widgets</a>
        </div>
        <!-- graphics -->
        <div class="treeNode">
          <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif"/>
          <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">Graphics and feature layers</span>
          <div class="treeSubnodesHidden">
            <div class="treeNode">
              <a class="treeUnselected" href="inside_graphics.html" onclick="clickAnchor(this)">Graphics overview</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="inside_feature_layers.html" onclick="clickAnchor(this)">Feature layer overview</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="inside_renderers.html" onclick="clickAnchor(this)">Symbols and renderers</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_bettermaps.html" onclick="clickAnchor(this)">Better vector mapping</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="inside_styling_svg.html" onclick="clickAnchor(this)">Styling features with CSS</a>
            </div>
          </div>
        </div>
        <!--info window-->
        <div class="treeNode">
          <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif">
          <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
            Popups and Info Windows
          </span>
          <div class="treeSubnodesHidden">
            <div class="treeNode">
              <a class="treeUnselected" href="intro_infowindow.html" onclick="clickAnchor(this)">Info window overview</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_formatinfowindow.html" onclick="clickAnchor(this)">Format info window content</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_customize.html" onclick="clickAnchor(this)">Customize info windows</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_agspopup.html" onclick="clickAnchor(this)">Popup overview</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_popuptemplate.html" onclick="clickAnchor(this)">Format popup content</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_customizepopup.html" onclick="clickAnchor(this)">Customize popup</a>
            </div>
          </div>
        </div>
        <!--routing book-->
        <div class="treeNode">
          <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif">
          <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
            Using the RouteTask
          </span>
          <div class="treeSubnodesHidden">
            <div class="treeNode">
              <a class="treeUnselected" href="intro_route_overview.html" onclick="clickAnchor(this)">Routing overview</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_route_routetask.html" onclick="clickAnchor(this)">Working with the route task</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_route_stop_seq.html" onclick="clickAnchor(this)">Optimize the route</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_route_directions.html" onclick="clickAnchor(this)">Driving directions</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_route_time_windows.html" onclick="clickAnchor(this)">Routing with time windows</a>
            </div>
          </div>
        </div>
        <!--end routing book-->
        <!--geoprocessing book-->
        <div class="treeNode">
          <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif">
          <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
            Using the Geoprocessor
          </span>
          <div class="treeSubnodesHidden">
            <div class="treeNode">
              <a class="treeUnselected" href="intro_gp_overview.html" onclick="clickAnchor(this)">Geoprocessing overview</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_gp_creating.html" onclick="clickAnchor(this)">Creating the geoprocessor</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_gp_parameters.html" onclick="clickAnchor(this)">Geoprocessor parameters</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_gp_running.html" onclick="clickAnchor(this)">Geoprocessing results</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--end book-->
    <!-- Mobile -->
    <div class="treeNode">
      <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif">
      <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">Mobile</span>
      <div class="treeSubnodesHidden">
        <div class="treeNode">
          <a class="treeUnselected" href="../jstutorials/mobile_dev.html" onclick="clickAnchor(this)">Getting Started Mobile Tutorial</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="mobile_viewport.html" onclick="clickAnchor(this)">Viewport Settings</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="mobile_hardware.html" onclick="clickAnchor(this)">Feature Detection and Browser Sniffing</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="mobile_orientation.html" onclick="clickAnchor(this)">Device Orientation</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="mobile_geolocation.html" onclick="clickAnchor(this)">Geolocation</a>
        </div>
        <!-- <div class="treeNode"> <img src="../graphics/treenodeplus.gif" class="treeLinkImage" onclick="expandCollapse(this.parentNode)"/> <span style="cursor: pointer;" onclick="expandCollapse(this.parentNode)">HTML5</span> <div class="treeSubnodesHidden"> <div class="treeNode"> <img src="../graphics/treenodedot.gif" class="treeNoLinkImage"> <a href="jshelp/mobile_touch.htm" class="treeUnselected" onclick="clickAnchor(this)">Touch Events</a> </div> <div class="treeNode"> <img src="../graphics/treenodedot.gif" class="treeNoLinkImage"> <a href="jshelp/mobile_geolocation.htm" class="treeUnselected" onclick="clickAnchor(this)">Geolocation</a> </div> <div class="treeNode"> <img src="../graphics/treenodedot.gif" class="treeNoLinkImage"> <a href="jshelp/mobile_offline.htm" class="treeUnselected" onclick="clickAnchor(this)">Offline</a> </div> <div class="treeNode"> <img src="../graphics/treenodedot.gif" class="treeNoLinkImage"> <a href="jshelp/mobile_storage.htm" class="treeUnselected" onclick="clickAnchor(this)">Web Storage</a> </div> </div> </div> -->
        <!-- <div class="treeNode"> <img src="../graphics/treenodedot.gif" class="treeNoLinkImage"> <a href="jshelp/mobile_hybrid.htm" class="treeUnselected" onclick="clickAnchor(this)">Hybrid Applications</a> </div> -->
        <div class="treeNode">
          <a class="treeUnselected" href="mobile_frameworks.html" onclick="clickAnchor(this)">Frameworks</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="mobile_references.html" onclick="clickAnchor(this)">References</a>
        </div>
      </div>
    </div>
    <!-- end book -->
    <!--Recommendations-->
    <div class="treeNode">
      <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif">
      <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
        Recommendations
      </span>
      <div class="treeSubnodesHidden">
        <div class="treeNode">
          <a class="treeUnselected" href="limits_for_graphics.html" onclick="clickAnchor(this)">Determining limits for map graphics</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="best_practices_feature_layers.html" onclick="clickAnchor(this)">Feature layer best practices</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_guidelines.html" onclick="clickAnchor(this)">Coding guidelines</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_faq.html" onclick="clickAnchor(this)">Frequently asked questions</a>
        </div>
      </div>
    </div>
    <!--end book-->
    <!-- Layout book -->
    <div class="treeNode">
      <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif">
      <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
        Application Layouts
      </span>
      <div class="treeSubnodesHidden">
        <div class="treeNode">
          <a class="treeUnselected" href="inside_dojoLayouts.html" onclick="clickAnchor(this)">Dojo layouts</a>
        </div>
      </div>
    </div>
    <!--End layout book -->
    <!--Working with ArcGIS Server Services-->
    <div class="treeNode">
      <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif">
      <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
        ArcGIS Server Services
      </span>
      <div class="treeSubnodesHidden">
        <div class="treeNode">
          <a class="treeUnselected" href="ags_overview.html" onclick="clickAnchor(this)">Overview</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="ags_rest.html" onclick="clickAnchor(this)">Services directory and the REST API</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="ags_secureservices.html" onclick="clickAnchor(this)">Working with secure resources</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="ags_proxy.html" onclick="clickAnchor(this)">Using the proxy page</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="ref_coordsystems.html" onclick="clickAnchor(this)">Coordinate system IDs</a>
        </div>
      </div>
    </div>
    <!--end book-->
    <!--What's new -->
    <div class="treeNode">
      <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif">
      <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
        What's New archive
      </span>
      <div class="treeSubnodesHidden">
        <div class="treeNode">
          <a class="treeUnselected" href="migration_30.html" onclick="clickAnchor(this)">Migrating to 3.0</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="migration_20.html" onclick="clickAnchor(this)">Migrating to 2.0</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v37.html" onclick="clickAnchor(this)">What's New in Version 3.7</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v36.html" onclick="clickAnchor(this)">What's New in Version 3.6</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v35.html" onclick="clickAnchor(this)">What's New in Version 3.5</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v34.html" onclick="clickAnchor(this)">What's New in Version 3.4</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v33.html" onclick="clickAnchor(this)">What's New in Version 3.3</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v32.html" onclick="clickAnchor(this)">What's New in Version 3.2</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v31.html" onclick="clickAnchor(this)">What's New in Version 3.1</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v30.html" onclick="clickAnchor(this)">What's New in Version 3.0</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v28.html" onclick="clickAnchor(this)">What's New in Version 2.8</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v27.html" onclick="clickAnchor(this)">What's New in Version 2.7</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v26.html" onclick="clickAnchor(this)">What's New in Version 2.6</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v25.html" onclick="clickAnchor(this)">What's New in Version 2.5</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v24.html" onclick="clickAnchor(this)">What's New in Version 2.4</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v23.html" onclick="clickAnchor(this)">What's New in Version 2.3</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v22.html" onclick="clickAnchor(this)">What's New in Version 2.2</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v21.html" onclick="clickAnchor(this)">What's New in Version 2.1</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v20.html" onclick="clickAnchor(this)">What's New in Version 2.0</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v16.html" onclick="clickAnchor(this)">What's New in Version 1.6</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v15.html" onclick="clickAnchor(this)">What's New in Version 1.5</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v14.html" onclick="clickAnchor(this)">What's New in Version 1.4</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v13.html" onclick="clickAnchor(this)">What's New in Version 1.3</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v12.html" onclick="clickAnchor(this)">What's New in Version 1.2</a>
        </div>
      </div>
    </div>
    <!--end book-->
    <!-- Book template <div class="treeNode"> <img src="../graphics/treenodeplus.gif" class="treeLinkImage" onclick="expandCollapse(this.parentNode)"/> <span style="cursor: pointer;" onclick="expandCollapse(this.parentNode)">Layers</span> <div class="treeSubnodesHidden"> <div class="treeNode"><img src="../graphics/treenodedot.gif" class="treeNoLinkImage"/><a href="http://skrzat/axlguide/jsdoc/class_style.cfm?theClass=ArcGISTiledMapServiceLayer" class="treeUnselected" onclick="clickAnchor(this)">ArcGISTiledMapServiceLayer</a></div> </div> </div>-->
    <!--end book-->
  </div>
</div>
<!-- pretty printed via http://prettydiff.com/?m=beautify&html --></div> <!-- sub 3:  Conceptual help TOC -->
  </div>
  <div class="grid_9 contentWrapper">
    <div id="topicPane"><div id="pageBanner">Writing a Custom Widget</div>

<div id="nstext">

<!--***START TEXT - DO NOT WRITE ABOVE THIS LINE***-->
<p>Dijit is the user interface library of the Dojo Toolkit that provides not only an <a href="http://archive.dojotoolkit.org/nightly/dojotoolkit/dijit/themes/themeTester.html" target="_blank">extensive library of pre-built and tested widgets</a>, but also a system for building your own custom widgets. This document will walk through creating a custom widget using Dijit and show how to use a custom dijit in an ArcGIS API for JavaScript application.</p>

<h4>Dijit Resources</h4>
<p>There are quite a few resources already available for getting to know Dijit. To gain a general understanding of how Dijit works, it is recommended to read through the material listed below. For instance, it is beneficial to know the difference between declarative and programmatic widget creation, the difference between dojo.byId and dijit.byId and the purpose dijit.registry (hint:  all answers are in the first link in the list).</p>
<ul>
  <li><a href="http://dojotoolkit.org/reference-guide/1.7/dijit/info.html#dijit-info" target="_blank">Dijit Introduction:  The Basics</a>
  <li><a href="http://dojotoolkit.org/reference-guide/1.7/dijit/index.html" target="_blank">Dijit Overview:  List of all Classes in the Dijit Namespace</a>
  <li><a href="http://dojotoolkit.org/documentation/tutorials/1.7/understanding_widgetbase/" target="_blank">Dojo Tutorial:  Understanding _WidgetBase</a>
  <li><a href="http://dojotoolkit.org/documentation/tutorials/1.7/templated/" target="_blank">Dojo Tutorial:  Creating Template-based Widgets</a></a>
  <li><a href="http://dojotoolkit.org/documentation/tutorials/1.7/recipes/custom_widget/" target="_blank">Dojo Tutorial:  Creating a Custom Widget</a>
</ul>

<h4>Why Dijit?</h4>
<p>The links above do a great job of describing why Dijit exists and many of the benefits of using Dijit. To re-cap, below is a list of why buidling custom dijits is a good idea when developing web applications:  </p>
<ul>
  <li>Provides a widget lifecycle (via "_Widget" or "_WidgetBase") to manage creation, interaction with and teardown of widgets
  <li>Built-in HTML templating system (using the "_Templated" mixin) that includes template loading, variable substitution, a convenient way to attach DOM nodes to widget properties and a convenient way to set up event listeners
  <li>Standard file structure to organize your widget's resources
</ul>

<h4>Creating the esri.dijit.Gauge Widget</h4>
<p>To illustrate the process of building a custom widget, the rest of this document will walk through how the Gauge dijit (released with version 3.0 of the API) was built. To see a working example, head over to the <a href="../jssamples/widget_gauge.html" target="_blank">Gauge sample</a>. The <a href="http://www.arcgis.com/home/item.html?id=8551c1bbcbec4b0e8a0415c08d053dfb" target="_blank">source and associated resources for the Gauge widget</a> are also available on ArcGIS.com as a zip file.</p>

<p>As mentioned previously, one of the recommended practices of custom dijit development is to use a standard file structure. This file structure consists of a JavaScript file at the root of a directory that is named to match the name of the custom dijit. In the case of the Gauge, this JavaScript file is named Gauge.js and lives in esri/dijit/. At the same level as the JavaScript file are folders that contain additional pieces of the widget:  css, images, templates and sometimes others, such as data. The Gauge uses css and templates for its stylesheet and HTML template.</p>

<p>Once the standard file structure is in place, the next step is to start building the JavaScript behind the widget. Since the widget is a class, this starts with dojo.provide, dojo.require and dojo.declare. For more on these, please refer to <a href="../jstutorials/intro_javascript_classes.html" target="_blank">Writing a Class</a>.</p>

<p>Here's the beginning of Gauge.js:  </p>
<div class="detailSample">
<pre class="prettyprint" style="border:none;">
dojo.provide("esri.dijit.Gauge");

dojo.require("dojo.cache");
dojo.require("dijit._Widget");
dojo.require("dijit._Templated");
dojo.require("dojox.widget.AnalogGauge");
dojo.require("dojox.widget.gauge.AnalogArcIndicator");

dojo.declare("esri.dijit.Gauge", [dijit._Widget, dijit._Templated], { 
</pre>
</div>

<p>The class name is defined, dependencies are required and a call to dojo.declare gets things under way. As shown here, the standard _Widget and _Templated classes are brought in and three other classes are loaded:  dojo.cache is used to load the widget's HTML template while AnalogGauge and AnalogArcIndicator are included to build the actual esri.dijit.Gauge UI.</p>

<p>The first thing that happens inside the Gauge declaration is to define a couple of custom properties:  </p>
<div class="detailSample">
<pre class="prettyprint" style="border:none;">
dojo.declare("esri.dijit.Gauge", [dijit._Widget, dijit._Templated], {
  templateString: dojo.cache("esri.dijit", "templates/Gauge.html"),
  widgetsInTemplate: false,
</pre>
</div>
<p>templateString specifies where the widget's template file lives and widgetsInTemplate indicates whether or not the template includes additional widgets, and if so create them automatically when the widget is created. For the Gauge, there are no additional widgets in the template. Please refer to the <a href="http://dojotoolkit.org/documentation/tutorials/1.7/templated/" target="_blank">Dojo tutorial title "Creating Template-based Widgets"</a> for more information.</p>

<p>After properties are defined, the <a href="http://dojotoolkit.org/reference-guide/1.7/dijit/_WidgetBase.html#dijit-widgetbase" target="_blank">dijit lifecycle</a> begins. Up first is constructor:  </p>
<div class="detailSample">
<pre class="prettyprint" style="border:none;">
  constructor: function(options, srcRefNode) {
    // expected properties and values for the options argument:
    //  caption:  text to display below the gauge
    //  color:  color for the gauge indicator
    //  dataField:  attribute field used to drive the gauge
    //  dataFormat:  whether to display an actual value or a percentage, valid values are "value" or "percentage", tick marks are only added when this is "percentage"
    //  dataLabelField:  attribute field to use display a feature's name, displayed below gauge title
    //  maxDataValue:  maximum value for the gauge
    //  noDataLabel:  string to use when a feature doesn't have a value for dataLabelField
    //  numberFormat:  object passed to dojo.number.format, see dojo documentation for details:  http://dojotoolkit.org/api/1.6/dojo/number, most common options:  specify a number of decimal places, for instance: { "places": 2 }
    //  title:  title for the gauge
    //  unitLabel:  label attribute field being displayed, use "" for no label
    //  fromWebmap:  boolean, if true, all options listed above are ignored and the JSON from a webmap is used to create the gauge
    //
    // srcRefNode is the DOM node where the gauge will be created

    // set up widget defaults
    this.caption = "&nbsp;";
    this.color = "#000";
    this.dataFormat = "value";
    this.maxDataValue = 100;
    this.title = "&nbsp;";
    this.unitLabel = "";
    this.fromWebmap = false;

    // used to keep a reference to the current graphic
    this.feature = null;

    // start with no feature name
    this.dataLabel = "&nbsp;";

    // mixin constructor options 
    dojo.safeMixin(this, options);

    // default is to not show ticks on the gauge
    this._majorTicks = "";
    
    // initialize value to zero
    this.value = 0;

    // default to zero decimal places if numberFormat is not provided
    this.numberFormat = this.numberFormat || { "places": 0 };

    if ( this.fromWebmap ) {
      // map properties from webmap JSON gadget to names that the gauge widget expected
      this.dataField = this.field;
      this.dataFormat = this.valueLabel;
      this.dataLabelField = this.displayField;
      this.maxDataValue = this.target;
      this.unitLabel = "";
    }

    if ( this.dataFormat == "percentage" ) {
      this.unitLabel = "%";
      this._majorTicks = { offset: 90, interval: 25, length: 3, color: "black" };
    }

    // watch updates of public properties and update the widget accordingly
    this.watch("caption", this._updateCaption);
    this.watch("dataLabel", this._updateDataLabel); 
    this.watch("title", this._updateTitle);
    this.watch("value", this._updateValue); 
    this.watch("feature", this._updateFeature); 
  },
</pre>
</div>

<p>The constructor function of a widget should accept two arguments:  an object containing options supported by the widget and a reference to the DOM element where the widget's user interface will be rendered. The main thing that happens in constructor is that widget properties are initialized. Also, because the Gauge widget can be created from a regular JSON object with specific properties and values, or from JSON stored in an <a href="http://help.arcgis.com/en/arcgisexplorer/help/index.html#//01560000004z000000" target="_blank">ArcGIS Online Webmap that has gauge gadget definitions</a>, checking is done to handle both cases. Finally, some watches are set up to monitor and react when certain attributes are set.</p>

<p>The Gauge widget does not do anything with the next five stages of the widget lifecycle (postScript, create, postMixinProperties, buildRenderering and postCreate) but it's worth mentioning that postCreate is the next stage at which developers usually interact with custom widgets. The main reason postCreate is important is because it is the stage where a widget's DOM structure is built and available to manipulate but the widget is not yet in the page yet.</p>

<p>The next step in the lifecycle, startup, is used by the Gauge: </p>
<div class="detailSample">
<pre class="prettyprint" style="border:none;">
  startup: function() {
    this.inherited(arguments);

    // create gauge now that the template has been inserted into the DOM
    // using startup instead of postCreate because some element
    // dimensions are needed
    var gaugeBackground = new dojox.widget.gauge.AnalogArcIndicator({
      interactionMode: "gauge",
      noChange: true,
      value: this.maxDataValue,
      width: 20,
      offset: 65,
      color: [204, 204, 204, 1], 
      title: "value",
      hideValue: true,
      duration: 100 // default in dojo is 1000
    });
    
    var indicator = new dojox.widget.gauge.AnalogArcIndicator({
      interactionMode: "gauge",
      noChange: false,
      value: this.value,
      width: 20,
      offset: 65,
      color: this.color,
      title: "value",
      hideValue: true,
      duration: 100 // default in dojo is 1000
    });

    this.gaugeWidget = new dojox.widget.AnalogGauge({
      background: [204, 204, 204, 0.0],
      width: parseInt(this.gaugeNode.style.width),
      height: parseInt(this.gaugeNode.style.height) + 10, // add 10 px so ticks show
      cx: parseInt(this.gaugeNode.style.width) / 2, 
      cy: parseInt(this.gaugeNode.style.height),
      style: "position: absolute;",
      radius: parseInt(this.gaugeNode.style.width) / 2, 
      useTooltip: false,
      ranges: [{ low: 0, high: this.maxDataValue, color: "rgba(255,0,0,0)" }],
      majorTicks: this._majorTicks, 
      indicators: [ gaugeBackground, indicator ]
    }, dojo.create("div", null, this.gaugeNode));
    this.gaugeWidget.startup();

    // add percent label
    this.valueNode = dojo.create("div",{
      "innerHTML": "0" + this.unitLabel,
      "style": {
        "bottom": parseInt(this.gaugeNode.style.height) - (this.gaugeWidget.cy - 20) + "px",
        "color": "#000",
        "font-family": "arial",
        "font-size": "1em",
        "left": "-1000px",
        "position": "absolute"
      }
    }, this.gaugeWidget.domNode);
    
    // put the percent label in the middle of the gauge
    var contentBox = dojo.contentBox(this.valueNode);
    dojo.style(this.valueNode, "left", this.gaugeWidget.cx + "px");
    dojo.style(this.valueNode, "marginLeft", (-contentBox.w/2) + "px");
    if( this.gaugeWidget.cx ) {
      dojo.style(this.valueNode, "marginBottom", (-contentBox.h/2) + "px");
    }

    // only do this if a layer is passed in
    if ( this.layer ) {
      this._connectMouseOver();
    }
  },
</pre>
</div>

<p>startup is used by the Gauge (as opposed to postCreate) because the Gauge needs the widget's markup to be in the page so that all DOM nodes will have all measurements and positions available. Startup is where other dojo widgets are created and added to the Gauge widget. If the Gauge widget is passed a reference to a layer as part of the options supplied to the Gauge constructor then a mouse over listener is set up to update the Gauge as the mouse moves over features in the layer.</p>

<p>At the top of the startup method, <code>this.inherited(arguments)</code> is called. When overriding a method defined by a parent class, especially one defined by the Dijit lifecycle, such as startup, it is important to call <code>this.inherited(arguments)</code>. this.inherited calls the parent class's method with the arguments supplied to the current class's method. This is done so that _Widget's (the Gauge class's parent class) startup method is called and all of the necessary _Widget code is executed.</p>

<p>After startup is defined, the rest of the Gauge's methods are defined:  </p>
<div class="detailSample">
<pre class="prettyprint" style="border:none;">
  destroy: function() {
    if ( this._mouseOverHandler ) {
      dojo.disconnect(this._mouseOverHandler);
    }
    this.gaugeWidget.destroy();
    dojo.empty(this.domNode);
  },

  _connectMouseOver: function() {
    this._mouseOverHandler = dojo.connect(this.layer, "onMouseOver", dojo.hitch(this, function(e) {
      this.set("feature", e);
    }));
  },

  _formatValue: function(val) {
    if ( this.dataFormat == "percentage" ) {
      // calculate the percentage
      val = Math.round(( val / this.maxDataValue ) * 100);
    }
    return dojo.number.format(val, this.numberFormat);
  },

  _updateCaption: function(attr, oldVal, newVal) {
    this.captionNode.innerHTML = newVal;
  },

  _updateTitle: function(attr, oldVal, newVal) {
    this.titleNode.innerHTML = newVal;
  }, 

  _updateValue: function(attr, oldVal, newVal) {
    var val = this._formatValue(newVal);
    this.valueNode.innerHTML = val + this.unitLabel;
    this.gaugeWidget.indicators[1].update(parseInt(val));
  },

  _updateDataLabel: function(attr, oldVal, newVal) {
    this.dataLabelNode.innerHTML = newVal;
  },

  _updateFeature: function(attr, oldVal, newVal) {
    // check that this is either a graphic or
    // or an event object with a graphic as a property
    if ( ! newVal || 
         ( newVal.hasOwnPropety && // this is for IE8, using hasOwnProperty was causing an error
           ! newVal.hasOwnProperty("graphic") && 
           ! newVal.declaredClass == "esri.Graphic" )
       ) {
      console.log("Gauge Dijit:  a graphic is required to update the gauge.");
      return;
    }

    this.feature = newVal.graphic || newVal;
    
    // update the widget's percent value
    // use zero when feature's don't have a valid value
    this.set("value", this.feature.attributes[this.dataField] || 0);
    this.set("dataLabel", this.feature.attributes[this.dataLabelField] || this.noDataLabel);
  }

});
</pre>
</div>

<p>That completes the declaration of the JavaScript class for the widget.</p>

<p>The template file and the CSS are simple and straightforward. The template file:  </p>
<div class="detailSample">
<pre class="prettyprint" style="border:none;">
&lt;div class="gaugeContainer"&gt;
  &lt;div data-dojo-attach-point="titleNode" class="gaugeTitle"&gt;${title}&lt;/div&gt;
  &lt;div data-dojo-attach-point="dataLabelWrapperNode"&gt;
    &lt;div data-dojo-attach-point="dataLabelNode"&gt;${dataLabel}&lt;/div&gt;
  &lt;/div&gt;
  &lt;div data-dojo-attach-point="gaugeNode" style="margin: -10px auto 10px auto; width: 240px; height: 120px;"&gt;&lt;/div&gt;
  &lt;div data-dojo-attach-point="captionNode" class="gaugeCaption"&gt;${caption}&lt;/div&gt;
&lt;/div&gt;
</pre>
</div>
<p>In the markup above, there are two things to note. First, in addition to the typical HTML attributes such as class and style, special attributes are used for some of the elements. Using the data-dojo-attach-point attribute allows assignment of a unique name for an element that can be used to reference to an element from the widget's JavaScript class. For example, the _updateTitle function refers to the div element that displays the title as "this.titleNode" where "titleNode" is the unique name assigned to it in the template. Second, substitution variables happens via Dojo's string substitution syntax. ${title}, ${dataLabel} and ${caption} are example of this. Note that title, dataLabel and caption are properties of the widget (see constructor function above).  When the widget is created, these variables will be replaced with the values of corresponding properties of the widget.</p>
<p>And the stylesheet:  </p>
<div class="detailSample">
<pre class="prettyprint" style="border:none;">
.gaugeContainer {
  background: #fff;
  border-top: 1px solid #ccc; 
  color: #444;
  font-family: arial;
  font-size: 0.8em;
  height: 170px;
  padding: 5px 5px 5px 5px;
  width: 280px;
}

.gaugeCaption {
  height: 1em;
  margin: 0;
}
</pre>
</div>

<h4>get() and set()</h4>
<p>One of the advantages to using _Widget is that it includes all of the components for simple getters and setters. When using a custom widget, simply call get() or set() to retrieve or set a widget attribute value. For instance, to update the Gauge's title, use <code>gauge.set("title", "New Title");</code>.</p>

<h4>Using a Custom Dijit</h4>
<p>Custom dijits are used in the same way as the Dijit classes that ship with Dojo. In this case, the esri.dijit.Gauge dijit is recommended to be used programmatically. This means creating the dijit with JavaScript (as opposed to markup) and manually calling startup(). To see example of how to use this widget refer to the samples in the ArcGIS API for JavaScript SDK that use the Gauge widget:  </p>
<ul>
  <li><a href="../jssamples/widget_gauge.html" target="_blank">Gauge</a>
  <li><a href="../jssamples/widget_gauge_webmap.html" target="_blank">Gauge from a Webmap</a>
</ul>

<!--***END TEXT - DO NOT WRITE BELOW THIS LINE***-->
</div>

<div id="wh_footer" class="footnote" align="center">
  Please <a href="mailto:js_feedback@esri.com?subject=Feedback on jshelp/intro_custom_dijit.html">contact the team</a> to comment or give suggestions.
  <br>
  Copyright &copy; Environmental Systems Research Institute, Inc.
</div></div> <!-- sub 4:  main content for a page and feedback markup -->
  </div>
</div> <!-- end main content -->

<!-- TOC script -->
<script src="../scripts/tree.js"></script>

<script src="../prettify/prettify.js"></script>
<script>
  var dojoConfig = {
    packages: [{
      "name": "js",
      "location": location.pathname.replace(/\/[^/]+$/, "/") + "../scripts"
    }]
  };
</script>
<script src="//js.arcgis.com/3.8compact/"></script> <!-- add API version -->
<script src="../scripts/esri-main-concepts.js"></script>

<!-- google analytics -->
<script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-215788-63']);
  _gaq.push(['_setDomainName', 'arcgis.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
 <!-- sub 5:  add script to redirect old hash based URLs to static pages and google analytics -->
</body>
</html>